
#!/bin/bash

# Ensure fzf is installed
if ! command -v fzf &> /dev/null; then
    echo "fzf not found. Please install with sudo apt install fzf"
    exit 1
fi

# List running containers with name and image
containers=$(docker ps --format "{{.ID}} {{.Image}} {{.Names}}" | column -t)

# Check if there are any running containers
if [ -z "$containers" ]; then
    echo "No running containers."
    exit 0
fi

# Use fzf to select a container
selected=$(echo "$containers" | fzf --prompt="Select container: ")

# Exit if nothing selected
[ -z "$selected" ] && exit 0

# Extract container ID from selected line
container_id=$(echo "$selected" | awk '{print $1}')

# Exec into the container
echo "Executing bash in container $container_id..."
docker exec -it "$container_id" bash
